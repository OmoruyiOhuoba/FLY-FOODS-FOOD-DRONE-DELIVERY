{"ast":null,"code":"import{SET_CURRENT_USER,USER_LOADING,GET_ERRORS}from\"./types\";import axios from\"axios\";import jwt_decode from\"jwt-decode\";import setAuthToken from\"../utils/setAuthToken\";import history from'../history';export var registerUser=function registerUser(userData){return function(dispatch){axios.post(\"/api/cityrunner/register\",userData).then(function(){console.log(\"success\");history.push(\"/signinuser\");})// re-direct to login on successful register\n.catch(function(err){return dispatch({type:GET_ERRORS,payload:err});});};};export var registerRider=function registerRider(userData){return function(dispatch){axios.post(\"/api/cityrunner/register\",userData).then(function(){console.log(\"success\");history.push(\"/signinrider\");})// re-direct to login on successful register\n.catch(function(err){return dispatch({type:GET_ERRORS,payload:err});});};};export var registerAdmin=function registerAdmin(userData){return function(dispatch){axios.post(\"/api/cityrunner/register\",userData).then(function(){console.log(\"success\");history.push(\"/signinadmin\");})// re-direct to login on successful register\n.catch(function(err){return dispatch({type:GET_ERRORS,payload:err});});};};// Login - get user token\nexport var loginUser=function loginUser(userData){return function(dispatch){axios.post(\"/api/cityrunner/login\",userData).then(function(res){// Save to localStorage\n// Set token to localStorage\nvar token=res.data.token;localStorage.setItem(\"jwtToken\",token);// Set token to Auth header\nsetAuthToken(token);// Decode token to get user data\nvar decoded=jwt_decode(token);// Set current user\ndispatch(setCurrentUser(decoded));history.push(\"/userdashboardhome\");}).catch(function(err){return dispatch({type:GET_ERRORS,payload:err});});};};export var loginRider=function loginRider(userData){return function(dispatch){axios.post(\"/api/cityrunner/login\",userData).then(function(res){// Save to localStorage\n// Set token to localStorage\nvar token=res.data.token;localStorage.setItem(\"jwtToken\",token);// Set token to Auth header\nsetAuthToken(token);// Decode token to get user data\nvar decoded=jwt_decode(token);// Set current user\ndispatch(setCurrentUser(decoded));history.push(\"/riderdashboardhome\");}).catch(function(err){return dispatch({type:GET_ERRORS,payload:err});});};};export var loginAdmin=function loginAdmin(userData){return function(dispatch){axios.post(\"/api/cityrunner/login\",userData).then(function(res){// Save to localStorage\n// Set token to localStorage\nvar token=res.data.token;localStorage.setItem(\"jwtToken\",token);// Set token to Auth header\nsetAuthToken(token);// Decode token to get user data\nvar decoded=jwt_decode(token);// Set current user\ndispatch(setCurrentUser(decoded));history.push(\"/admindashboardhome\");}).catch(function(err){dispatch({type:GET_ERRORS,payload:err});});};};export var setCurrentUser=function setCurrentUser(decoded){return{type:SET_CURRENT_USER,payload:decoded};};export var setUserLoading=function setUserLoading(){return{type:USER_LOADING};};export var logoutUser=function logoutUser(){return function(dispatch){localStorage.removeItem(\"jwtToken\");setAuthToken(false);dispatch(setCurrentUser({}));history.push(\"/\");};};export var logoutRider=function logoutRider(){return function(dispatch){localStorage.removeItem(\"jwtToken\");setAuthToken(false);dispatch(setCurrentUser({}));history.push(\"/signinrider\");};};export var logoutAdmin=function logoutAdmin(){return function(dispatch){localStorage.removeItem(\"jwtToken\");setAuthToken(false);dispatch(setCurrentUser({}));history.push(\"/signinadmin\");};};","map":{"version":3,"sources":["/Users/omoruyiohuoba/Desktop/APPS/WEB DEVELOPMENT/CITY-RUNNER/client/src/actions/authActions.js"],"names":["SET_CURRENT_USER","USER_LOADING","GET_ERRORS","axios","jwt_decode","setAuthToken","history","registerUser","userData","dispatch","post","then","console","log","push","catch","err","type","payload","registerRider","registerAdmin","loginUser","res","token","data","localStorage","setItem","decoded","setCurrentUser","loginRider","loginAdmin","setUserLoading","logoutUser","removeItem","logoutRider","logoutAdmin"],"mappings":"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","sourcesContent":["import {SET_CURRENT_USER, USER_LOADING, GET_ERRORS} from \"./types\";\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport setAuthToken from \"../utils/setAuthToken\";\nimport history from '../history';\n\n\n\n\n\nexport const registerUser = (userData) => dispatch => {\n\n    axios.post(\"/api/cityrunner/register\", userData)\n      .then(() => {\n        console.log(\"success\");\n        history.push(\"/signinuser\");\n      }) // re-direct to login on successful register\n      .catch(err =>\n        dispatch({\n          type: GET_ERRORS,\n          payload: err\n        })\n      );\n  };\n \n  export const registerRider = (userData) => dispatch => {\n\n    axios.post(\"/api/cityrunner/register\", userData)\n      .then(() => {\n        console.log(\"success\");\n        history.push(\"/signinrider\");\n      }) // re-direct to login on successful register\n      .catch(err =>\n        dispatch({\n          type: GET_ERRORS,\n          payload: err\n        })\n      );\n  };\n\n  export const registerAdmin = (userData) => dispatch => {\n\n    axios.post(\"/api/cityrunner/register\", userData)\n      .then(() => {\n        console.log(\"success\");\n        history.push(\"/signinadmin\");\n      }) // re-direct to login on successful register\n      .catch(err =>\n        dispatch({\n          type: GET_ERRORS,\n          payload: err\n        })\n      );\n  };\n\n\n  // Login - get user token\n  export const loginUser = userData => dispatch => {\n    axios.post(\"/api/cityrunner/login\", userData)\n      .then(res => {\n        // Save to localStorage\n  // Set token to localStorage\n        const { token } = res.data;\n        localStorage.setItem(\"jwtToken\", token);\n        // Set token to Auth header\n        setAuthToken(token);\n        // Decode token to get user data\n        const decoded = jwt_decode(token);\n        // Set current user\n        dispatch(setCurrentUser(decoded));\n        history.push(\"/userdashboardhome\");\n              })\n      .catch(err =>\n        dispatch({\n          type: GET_ERRORS,\n          payload: err\n        })\n      );\n  };\n\n  export const loginRider = userData => dispatch => {\n    axios.post(\"/api/cityrunner/login\", userData)\n      .then(res => {\n        // Save to localStorage\n  // Set token to localStorage\n        const { token } = res.data;\n        localStorage.setItem(\"jwtToken\", token);\n        // Set token to Auth header\n        setAuthToken(token);\n        // Decode token to get user data\n        const decoded = jwt_decode(token);\n        // Set current user\n        dispatch(setCurrentUser(decoded));\n        history.push(\"/riderdashboardhome\");\n             })\n      .catch(err =>\n        dispatch({\n          type: GET_ERRORS,\n          payload: err\n        })\n      );\n  };\n\n  export const loginAdmin = userData => dispatch => {\n    axios.post(\"/api/cityrunner/login\", userData)\n      .then(res => {\n        // Save to localStorage\n  // Set token to localStorage\n        const { token } = res.data;\n        localStorage.setItem(\"jwtToken\", token);\n        // Set token to Auth header\n        setAuthToken(token);\n        // Decode token to get user data\n        const decoded = jwt_decode(token);\n        // Set current user\n        dispatch(setCurrentUser(decoded));\n        history.push(\"/admindashboardhome\");\n              })\n      .catch(err => {\n        dispatch({\n          type: GET_ERRORS,\n          payload: err\n        });\n      \n      }\n      );\n  };\n\nexport const setCurrentUser = decoded => {\n        return {\n            type: SET_CURRENT_USER,\n            payload: decoded\n        }\n    };\n\n export const setUserLoading = () => {\n        return {\n            type: USER_LOADING\n        };\n    };\n\nexport const logoutUser = () => dispatch => {\n        localStorage.removeItem(\"jwtToken\");\n        setAuthToken(false);\n        dispatch(setCurrentUser({}))\n        history.push(\"/\");\n        \n    };\n\nexport const logoutRider = () => dispatch => {\n        localStorage.removeItem(\"jwtToken\");\n        setAuthToken(false);\n        dispatch(setCurrentUser({}))\n        history.push(\"/signinrider\");\n        \n    };\n\nexport const logoutAdmin = () => dispatch => {\n        localStorage.removeItem(\"jwtToken\");\n        setAuthToken(false);\n        dispatch(setCurrentUser({}))\n        history.push(\"/signinadmin\");\n        \n    };\n\n\n"]},"metadata":{},"sourceType":"module"}