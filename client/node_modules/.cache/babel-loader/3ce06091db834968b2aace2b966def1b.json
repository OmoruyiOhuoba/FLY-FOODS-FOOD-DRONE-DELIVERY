{"ast":null,"code":"import _defineProperty from\"/Users/omoruyiohuoba/Desktop/APPS/WEB DEVELOPMENT/CITY-RUNNER/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/omoruyiohuoba/Desktop/APPS/WEB DEVELOPMENT/CITY-RUNNER/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/omoruyiohuoba/Desktop/APPS/WEB DEVELOPMENT/CITY-RUNNER/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{loginUser}from\"../../actions/authActions\";import{Link}from\"react-router-dom\";import backArrow from\"../../assets/backarrow.svg\";import Logo from\"../../assets/logo-2.png\";import history from'../../history';import axios from\"axios\";var ForgotPassword=function ForgotPassword(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),emailErr=_useState2[0],setEmailErr=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),passwordErr=_useState4[0],setPasswordErr=_useState4[1];var _useState5=useState({email:\"\",password:\"\",errors:{}}),_useState6=_slicedToArray(_useState5,2),userData=_useState6[0],setUserData=_useState6[1];var _useSelector=useSelector(function(state){return{auth:state.auth,errors:state.errors};}),auth=_useSelector.auth,errors=_useSelector.errors;var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setUserData(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},name,value));});console.log(userData);};var handleSubmit=function handleSubmit(event){event.preventDefault();var isValid=formValidation();if(isValid){if(userData.email&&userData.errors&&userData.password){axios.post(\"/api/cityrunner/forgotpassword\",userData).then(function(){console.log(\"forgot password email sent\");history.push(\"/forgotpasswordsent\");}).catch(function(error){console.log(error);});setEmailErr(\"\");setPasswordErr(\"\");}}console.log(userData);};var formValidation=function formValidation(){var emailErr={};var isValid=true;if(userData.password===\"\"){passwordErr.passwordRequired=\"The password field is required\";isValid=false;}if(userData.password.length>0&&userData.password.length<8){passwordErr.passwordShort=\"Password must be at least 8 characters\";isValid=false;}if(userData.password.length>30){passwordErr.passwordLong=\"Password can't be more than 30 characters\";isValid=false;}if(typeof userData.email!==\"string\"){emailErr.emailType=\"Enter a valid email address\";isValid=false;}if(userData.email===\"\"){emailErr.emailRequired=\"The email field is required\";isValid=false;}setPasswordErr(passwordErr);setEmailErr(emailErr);return isValid;};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/home\",children:/*#__PURE__*/_jsx(\"img\",{className:\"centre-logo\",src:Logo,alt:\"logo\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"contactForm\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"myForm\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{class:\"input-group outskirt2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"outskirt2\",children:\"We will send a temporary password to your email which will allow you to access your account and reset your password\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",onChange:handleChange,value:userData.email,required:true}),/*#__PURE__*/_jsx(\"span\",{class:\"highlight\"}),/*#__PURE__*/_jsx(\"span\",{class:\"bar\"}),/*#__PURE__*/_jsx(\"label\",{className:\"label-class\",children:\"Your Email\"})]}),Object.keys(emailErr).map(function(key){return/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\",textAlign:\"left\"},children:[\" \",emailErr[key],\" \"]});}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",onChange:handleChange,value:userData.password,required:true}),/*#__PURE__*/_jsx(\"span\",{class:\"highlight\"}),/*#__PURE__*/_jsx(\"span\",{class:\"bar\"}),/*#__PURE__*/_jsx(\"label\",{className:\"label-class\",children:\"Your Password\"})]}),Object.keys(passwordErr).map(function(key){return/*#__PURE__*/_jsxs(\"div\",{style:{color:\"red\",textAlign:\"left\"},children:[\" \",passwordErr[key],\" \"]});}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttonPosition\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"contact-button\",type:\"submit\",onClick:handleSubmit,children:\" Send Mail \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]})]})})]});};export default ForgotPassword;","map":{"version":3,"sources":["/Users/omoruyiohuoba/Desktop/APPS/WEB DEVELOPMENT/CITY-RUNNER/client/src/components/Auth/ForgotPassword.jsx"],"names":["React","useState","useEffect","useSelector","useDispatch","loginUser","Link","Logo","history","axios","ForgotPassword","emailErr","setEmailErr","passwordErr","setPasswordErr","email","password","errors","userData","setUserData","state","auth","handleChange","event","target","name","value","prevData","console","log","handleSubmit","preventDefault","isValid","formValidation","post","then","push","catch","error","passwordRequired","length","passwordShort","passwordLong","emailType","emailRequired","Object","keys","map","key","color","textAlign"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport {useSelector, useDispatch} from \"react-redux\";\nimport {loginUser} from \"../../actions/authActions\";\nimport {Link} from \"react-router-dom\";\nimport backArrow from \"../../assets/backarrow.svg\";\nimport Logo from \"../../assets/logo-2.png\";\nimport history from '../../history'; \nimport axios from \"axios\";\n\n\n\nconst ForgotPassword = () => {\n    const [emailErr, setEmailErr] = useState({});\n    const [passwordErr, setPasswordErr] = useState({});\n\n\n    const [userData, setUserData] = useState({\n        email: \"\",\n        password: \"\",\n        errors:{},\n    });\n\n\n    const { auth, errors } = useSelector(state => ({\n        auth: state.auth,\n        errors: state.errors,\n      })); \n\n\n    \n      const handleChange = (event) => {\n        const {name, value} =event.target;\n\n        setUserData(prevData => {\n            return {\n                ...prevData, [name]: value\n            }\n        });\n\n        console.log(userData);\n    }\n\n    const handleSubmit = (event) => {\n        event.preventDefault();\n        const isValid = formValidation();\n\n\n        if(isValid){\n            if(userData.email && userData.errors && userData.password){\n                axios.post(\"/api/cityrunner/forgotpassword\", userData) \n                .then(()=> {\n                    console.log(\"forgot password email sent\");\n                    history.push(\"/forgotpasswordsent\");\n                }).catch((error) => {\n                    console.log(error)\n                }\n\n                )\n          \n    \n                setEmailErr(\"\");\n                setPasswordErr(\"\");\n\n              \n            }\n\n        }\n\n        console.log(userData);\n\n\n\n    }\n\n    const formValidation = () => {\n        const emailErr = {};\n        let isValid = true;\n\n\n\n        if( userData.password === \"\"){\n            passwordErr.passwordRequired = \"The password field is required\";\n            isValid = false;\n        }\n        \n        if(userData.password.length > 0 && userData.password.length < 8){\n            passwordErr.passwordShort = \"Password must be at least 8 characters\";\n            isValid = false;\n        }\n\n          \n        if(userData.password.length > 30 ){\n            passwordErr.passwordLong = \"Password can't be more than 30 characters\";\n            isValid = false;\n        }\n  \n        if( typeof userData.email !== \"string\"){\n            emailErr.emailType = \"Enter a valid email address\";\n            isValid = false;\n        }\n\n        if( userData.email === \"\"){\n            emailErr.emailRequired = \"The email field is required\";\n            isValid = false;\n        }\n        \n        setPasswordErr(passwordErr);\n        setEmailErr(emailErr);\n        return isValid;\n\n\n    }\n\n  \n     \n\n\n    return(\n            <div>\n            <Link to=\"/home\" ><img className=\"centre-logo\" src={Logo} alt=\"logo\"/></Link> \n            <br/>\n\n\n            <div className=\"contactForm\">\n            <form id=\"myForm\">\n                <br/>\n                <br/>\n                <br/>\n\n                <div class=\"input-group outskirt2\">\n            <p className=\"outskirt2\">We will send a temporary password to your email which will allow you to access your account and reset your password</p>\n\n            </div>\n                \n            <div class=\"input-group\">\n                <input type=\"email\" name=\"email\" onChange={handleChange} value={userData.email} required />\n                <span class=\"highlight\"></span>\n                <span class=\"bar\"></span>\n                <label className=\"label-class\">Your Email</label>\n            </div>\n            {Object.keys(emailErr).map((key)=> {\n                return <div style={{color: \"red\", textAlign: \"left\"}}> {emailErr[key]} </div>\n            })}\n\n            <div class=\"input-group\">\n                <input type=\"password\" name=\"password\" onChange={handleChange} value={userData.password} required />\n                <span class=\"highlight\"></span>\n                <span class=\"bar\"></span>\n                <label className=\"label-class\">Your Password</label>\n            </div>\n            {Object.keys(passwordErr).map((key)=> {\n                return <div style={{color: \"red\", textAlign: \"left\"}}> {passwordErr[key]} </div>\n            })}\n\n\n            <br/>\n            <div className=\"buttonPosition\">\n                <button className=\"contact-button\" type=\"submit\" onClick={handleSubmit}> Send Mail </button>\n\n                <br/>\n                <br/>\n                <br/>\n                <br/> <br/>\n                <br/>\n              </div>\n            </form>\n        </div>\n\n\n\n\n            </div>\n    \n    )\n\n}\n\nexport default ForgotPassword;"]},"metadata":{},"sourceType":"module"}